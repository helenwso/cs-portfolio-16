<html>
    <head>
        <title> Vindinium | Helen So </title>
        <link rel="stylesheet" href="vindinium.css" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Satisfy" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
        <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAANR3PACoUbQA1SDcAPG1BAEUq/wAoH0kAKTMcAFunawBJf08AfHf/ACcQigAAAAAAAAAAAAAAAAAAAAAARAAEAAAAAABIMDkyuyAAADiXMrqqUgAAOTdhUREVYAAHZiuysiJgAAalUSsVqqYAalG2sbuxGmAqGyIiZisVICq7axUbYitSJRa6sbsbIasLa6sapbUlsAC6EqG7GmsAALpbWxWhsAAAAqGhu7sAAAAAtRpbAAAAAAACu7AAAAA7/wAAEB8AAAAPAAAABwAAgAcAAIADAAAAAQAAAAEAAAAAAAAAAAAAgAEAAMADAADABwAA4A8AAPA/AAD4fwAA" rel="icon" type="image/x-icon" />
        <!--Fonts-->
        <style type="text/css">body { cursor: url('data:image/x-icon;base64,AAACAAEAICAQAAAAAADoAgAAFgAAACgAAAAgAAAAQAAAAAEABAAAAAAAAAIAAAAAAAAAAAAAEAAAAAAAAAAAAAAA////AK6C/wBj5lwAFIoOAB3ZFAAk6xoAnEX/AB/7/wAcwhMAdwD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAACqqqqqqgAAAAAAAAAAAACqd3d3d3eqqgAAAAAAAAAKd3qqqqqnd3eqAAAAAAAACnqqiqqqqqp3d6qgAAAAAKd6qqqqqqqqqnd3egAAAACnqqqqqqqqiqqqp3egAAAAp6p3d3qqqqqqqqp3egAAAKend3d3d6qqqqqqp3oAAACnd3d3d3h3qqqqqqp3oAAAp3d4d3d3d3eqqqiqp6AAAAp3d3d3d3d3eqqqqqegAAAKd3ciIid3d4eqqqqHoAAACncSIiIiJ3d3eqqqp6AAAAp3ciIoIiJ3d3qqqqegAAAAp3ISIiIiJ3d6qqp3oAAAAKdxESIiIid3eqiqepmQBgAKdxIiIiInd3qqp3pJZmAACndyIREiJ4eqqqekSWMwAACndxEREid6qqp3pJmTAAAACncRERJ3qqqnekRJAAAAAACnEREXd6qqd6REQAAAAAAACqERd3qqd3pESZYAAAAAAAAKp3d3d6qkSZZmAAAAAAAAAAqqqqoJmVWWM2AAAAAAAAAAAAAACVVVBjNgAKAAAAAAAAAAAAUzMAAGYACqAAAAAAAAAAAAMwAAAGAAqqAAAAAAAAAABgAAAAAGAKqqAAAAAAAAAAAAAAAAAACqqqAAAAAAAAAAAAAAAAAAqqqqAAAAAAAAAAAAAAAAAKqqqqAAAAAAAAAAAAAAAADwA///wAA//4AAD/+AAAH/AAAA/wAAAH8AAAA/AAAAPwAAAB8AAAAfgAAAH4AAAB+AAAAfgAAAH8AAAB/AAAAG4AAAAeAAAAHwAAAD+AAAD/wAAB/+AAAP/4AAD//gIAf//+CHf//h5z//8/cf/+/7D////wf///8D////Af///w=='), auto; }</style>
    </head>
    <body>
        
         <!-- Navbar Starts Here -->
   <ul id="navbar">
       <li> <a href= "about-me.html"> About Me </a></li>
       <li> <a href= "hardware.html"> Hardware </a></li>
       <li> <a href= "howto.html"> How To </a></li>
       <li> <a href= "calculator.html"> Calculator </a></li>
       <li> <a href= "index.html"> Home </a></li>
       <li> <a href= "changer.html"> Color Changer </a></li>
       <li> <a href= "todo.html"> Todo List </a></li>
       <li> <a href= "vindinium.html"> Vindinium </a></li>
       <li> <a href= "#"> Big Project </a></li>
       
   </ul>
         <!-- Navbar Ends Here -->
    <br>

Vindinium is a dungeon-style role-playing game.
The primary objective is to collect gold.
The person who collects the most gold by the end of the game wins.
Each bot has a life points cap of 100. Moving and fighting reduces life.
<br><br>
Life can be restored at the tavern, where players use their gold to buy restorative cream sodas.
Gold can be collected by fighting goblins at mines, taking ownership of the mines in the process.
Mines give you gold each turn. When two bots meet at the same location, a battle ensues. The first person to reach 0 health is the loser.
All of their mines are lost to the winner; however, they retain all their gold while respawning at their starting position.
Trees are obstacles in the game, and can cause bots to get stuck if their code does not account for a solution.
<br><br>
Players, mines, taverns, and obstacles are present in each game.
Maps are always symmetrical, but object locations, spawn positions, map sizes, and the number of mines available can vary immensely.
One game may have a tiny map with only 4 mines available. This leads to bots constantly under the threat of attack,
quick losses of life, and constant mine turnover. The small number of mines in combination with small maps lead to games
that are often very close- there may only be a small difference in gold count between the first and fourth place bot.
<br><br>
Another game may have two dozen mines and a large map. This often means that taverns are more spread out.
If one bot takes all the mines, another bot can attack that bot and gain all of their mines. Whoever gets the most gold in the end often is the person who has held the mines the longest, and most successfully avoided loss of life.
<br><br>
Many strategies can take place in this game. One bot may do better in a small map than a large map. The "hunger games" bot can be programmed to only kill other bots and survive.
Or if you prefer a "absolute jerk" bot, you could program one that takes the majority of the mines and just goes random near a tavern.
In my project, I decided to program a bot that accounted for many possible situations.
If I learned more coding skills, I could potentially program a bot that can avoid players
(by going in the opposite direction of close players if health is at risk).
<br><br><br><br>
I will now be detailing each part of my code!

<div style="padding: 10px; height:500px; width:1000px; border:1px solid #ccc; font:16px; overflow:auto;">
<pre>
    <code>
var Bot = require('bot');
var PF = require('pathfinding');
//var bot = new Bot('5rf2d9zw', 'training', 'http://vindinium.org'); //Put your bot's code here and change training to Arena when you want to fight others.
var bot = new Bot('5rf2d9zw' , 'arena' , 'http://52.39.33.197:9000'); //Put your bot's code here and change training to Arena when you want to fight others.
var goDir;
var Promise = require('bluebird');
Bot.prototype.botBrain = function() {
    return new Promise(function(resolve, reject) {
        _this = bot;
        
        //////* Write your bot below Here *//////
        //////* Set `myDir` in the direction you want to go and then bot.goDir is set to myDir at the bottom *////////

        /*                                      *
         * This Code is global data!            *
         *                                      */

        // Set myDir to what you want and it will set bot.goDir to that direction at the end.  Unless it is "none"
        var myDir;
        
        // My bot's position.
        var myPos = [bot.yourBot.pos.x, bot.yourBot.pos.y];
        
        // The bots of other players.
        var enemyBots = [];
        if(bot.yourBot.id != 1) enemyBots.push(bot.bot1);
        if(bot.yourBot.id != 2) enemyBots.push(bot.bot2);
        if(bot.yourBot.id != 3) enemyBots.push(bot.bot3);
        if(bot.yourBot.id != 4) enemyBots.push(bot.bot4);
        
        // The mines of enemies, concatenated into one array.
        var enemyMines = enemyBots[0].mines.concat(enemyBots[1].mines).concat(enemyBots[2].mines);
        
        // The single closest enemy mine.
        var closestEnemyMine = enemyMines[0];
            for(i = 0; i < enemyMines.length; i++) {
                if(bot.findDistance(myPos, closestEnemyMine) > bot.findDistance(myPos, enemyMines[i])) {
                    closestEnemyMine= enemyMines[i];
                }
            }
        
        // The closest player to my bot.
        var closestPlayer = enemyBots[0];
            for(i = 0; i < enemyBots.length; i++) {
                if(bot.findDistance(myPos, closestPlayer.posArray) > bot.findDistance(myPos, enemyBots[i].posArray)) {
                    closestPlayer = enemyBots[i];
                }
            }
        
        // The bot with the most mines.
        var mostMinesBot = enemyBots[0];
            for(i = 0; i < enemyBots.length; i++) {
                if ((mostMinesBot.mineCount) < (enemyBots[i].mineCount)) {
                    mostMinesBot = enemyBots[i];
                }
            }
            
        // The nearest tavern to the bot with most mines.
        var mostMinesTavern = bot.taverns[0];
            for(i = 0; i < bot.taverns.length; i++) {
                if(bot.findDistance(mostMinesBot.posArray, mostMinesTavern) > bot.findDistance(mostMinesBot.posArray, bot.taverns[i])){
                    mostMinesTavern = bot.taverns[i];
                }
            }

            
        /*                                      *
         * This Code Decides WHAT to do         *
         *                                      */
         
         
        var task;
        // If life is less than or equal to 45, go to the nearest tavern.
        if (bot.yourBot.life <= 45){
            task = "tavern";
        }
        // If there is a free mine, claim the closest one.
        else if (bot.freeMines.length > 0){   
            task = "claimClosestFreeMine";
        }
        // If the bot with most mines has two or more mines, attack them.
        else if (mostMinesBot.mineCount >= 2){   
            task = "attackMostMinesBot"; 
        }
        // If there's an enemy mine, claim the closest one.
        else if (enemyMines.length > 0){   
            task = "claimClosestEnemyMine"; 
        }
        // If I have all mines and my life points are equal to or more than 70, go in a random direction.
        else if ((bot.yourBot.life >= 70) && (bot.yourBot.mineCount == (enemyMines.length) + (bot.freeMines.length))){
            console.log("Going Random!");
            var rand = Math.floor(Math.random() * 4);
            var dirs = ["north", "south", "east", "west"];
            bot.goDir = dirs[rand];
        }
        // If none of the above conditions apply, go to the nearest tavern.
        else {
            task = "tavern";
        }
        
        
        /*                                      *
         * This Code Determines HOW to do it    *
         *                                      */
        /*                                                                                                                              *
         
         
         * This Code sets your direction based on myDir.  If you are trying to go to a place that you can't reach, you move randomly.   *
         * Otherwise you move in the direction set by your code.  Feel free to change this code if you want.                            */
        
        // Find the nearest free mine and set myDir toward that direction.    
        if(task === "claimClosestFreeMine") {
            var closestFreeMine = bot.freeMines[0];
            for(i = 0; i < bot.freeMines.length; i++) {
                if(bot.findDistance(myPos, closestFreeMine) > bot.findDistance(myPos, bot.freeMines[i])) {
                    closestFreeMine = bot.freeMines[i];
                }
            }
            console.log("Claiming Closest Free Mine!");
            myDir = bot.findPath(myPos, closestFreeMine);
        }
        
        // Set myDir towards the direction of the bot with most mines.
        if(task === "attackMostMinesBot") {
            console.log("Attacking Most Mines Bot!");
            myDir = bot.findPath(myPos, mostMinesBot.posArray);
        }  
        
        // Sets myDir towards the direction of the closest player.
        if (task === "attackClosest"){
            console.log("Attacking Closest Player!");
            myDir = bot.findPath(myPos, closestPlayer.posArray);
        }
        
        // Sets myDir towards the direction of the closest enemy mine.
        if (task === "claimClosestEnemyMine"){
            console.log("Claiming Closest Enemy Mine!");
            myDir = bot.findPath(myPos, closestEnemyMine);
        }        
        
        // Finds the nearest tavern and sets myDir towards that direction.
        if(task === "tavern") {
            var closestTavern = bot.taverns[0];
            for(i = 0; i < bot.taverns.length; i++) {
                if(bot.findDistance(myPos, closestTavern) > bot.findDistance(myPos, bot.taverns[i])){
                    closestTavern = bot.taverns[i];
                }
            }
            console.log("Going to Tavern!");
            myDir = bot.findPath(myPos, closestTavern);
        }
       
        //code needed to run the game.
        ///////////* DON'T REMOVE ANTYTHING BELOW THIS LINE *//////////////
        resolve();
    });
}
bot.runGame();
    </code>
</pre>
</div> <!-- This div is so the code can be in a scroll box.-->
<br><br>
<div class ="sectionTitle"> 
    Things My Bot Does
</div>
<br>
There are three main components to making the bot work. The first is a set of conditions and relative task names.
Second is the variables that allow the bot to work- some are pre-defined, while others are created from pre-defined variables.
Third is the task itself and how it works. Most of my tasks are explained in the comments below.
<br><br>
<div style="padding: 10px; height:500px; width:1000px; border:1px solid #ccc; font:16px; overflow:auto;">
<pre>
    <code>
        
        var task;
        // If life is less than or equal to 45, go to the nearest tavern.
        if (bot.yourBot.life <= 45){
            task = "tavern";
        }
        // If there is a free mine, claim the closest one.
        else if (bot.freeMines.length > 0){   
            task = "claimClosestFreeMine";
        }
        // If the bot with most mines has two or more mines, attack them.
        else if (mostMinesBot.mineCount >= 2){   
            task = "attackMostMinesBot"; 
        }
        // If there's an enemy mine, claim the closest one.
        else if (enemyMines.length > 0){   
            task = "claimClosestEnemyMine"; 
        }
        // If I have all mines and my life points are equal to or more than 70, go in a random direction.
        else if ((bot.yourBot.life >= 70) && (bot.yourBot.mineCount == (enemyMines.length) + (bot.freeMines.length))){
            console.log("Going Random!");
            var rand = Math.floor(Math.random() * 4);
            var dirs = ["north", "south", "east", "west"];
            bot.goDir = dirs[rand];
        }
        // If none of the above conditions apply, go to the nearest tavern.
        else {
            task = "tavern";
        }
        
    </code>
</pre>
</div>
<br>
However, one thing does need some clarification- the else statement. 
If the following apply, the task will run.
<br>
<ol>
    <li> Health is more than 45 </li>
    <li> There are no free or enemy mines </li>
    <li> No one has two or more mines </li>
    <li> I don't have all mines in addition to a life above 70 </li>
</ol>
<br>
What exactly is the situation in which "else" applies?
<br>
Well,
<ol>
    <li> If there are no free or enemy mines, that means I own all the mines.</li>
    <li> If I own all the mines and have life of 70+, I will be going random.</li>
    <li> If I own all the mines and have a life of 45-, I will be going to the tavern.</li>
</ol>
<br>
This means that this "else" will only apply when I have all mines, a life that is 45 and higher, and 69 and lower.<br><br>
This is important because if I have all the mines, I will need special protection, since many bots attack the bot with the most mines.
The only place where I am safe from death is the tavern, which consumes gold.
To preserve gold, I go in a random direction when my health is above 70.
However, as I am constantly in danger of being attacked, below that point starts to get risky.<br><br>
Therefore, going to the tavern when health is less than 70 increases my chance of living and keeping my weatlh of mines.<br>
<br>

Now, I will be explaining how each of the tasks works! <br><br>

<div class ="sectionTitle"> If life is less than or equal to 45, go to the tavern. </div><br><br>
<div style="padding: 10px; height:100px; width:1000px; border:1px solid #ccc; font:16px; overflow:auto;">
<pre>
    <code>
        if (bot.yourBot.life <= 45){
            task = "tavern";
        }
   <br>
   </code>
</pre></div><br><br>
The tavern is always first priority. If I die, I will waste valuable time in trying to get to my destination, and on top of that,
have to claim all my mines back.

<div style="padding: 10px; height:100px; width:1000px; border:1px solid #ccc; font:16px; overflow:auto;">
<pre>
    <code>
        // Finds the nearest tavern and sets myDir towards that direction.
        if(task === "tavern") {
            var closestTavern = bot.taverns[0];
            for(i = 0; i < bot.taverns.length; i++) {
                if(bot.findDistance(myPos, closestTavern) > bot.findDistance(myPos, bot.taverns[i])){
                    closestTavern = bot.taverns[i];
                }
            }
            console.log("Going to Tavern!");
            myDir = bot.findPath(myPos, closestTavern);
        }
   <br>
   </code>
</pre></div><br><br>
This code checks if the task is "tavern". Since going to the nearest tavern would use up the least heatlh,
it defines the variable for the closest tavern. First, it sets the closest tavern as the first tavern in the array.
It then checks the next tavern in the array, and compares the two. If my distance from the supposed closest tavern (the first tavern in the array)
is farther from the distance from the next tavern in the array, it sets the closer tavern as the closest tavern.
By the time it runs through the entire array, it would've found the final closest tavern.
Then, it sets the bot in the direction of the closest Tavern, while console logging "Going to Tavern!"

<div class ="sectionTitle"> If there is a free mine, claim it. </div>






    </body>
</html>




</DOCTYPE>